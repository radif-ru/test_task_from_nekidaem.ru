version: "3.7"


services:
  blog_db:
    image: postgres:10.1-alpine
    volumes:
      - postgres_data:/var/lib/postgresql/data/
  blog_web:
    build: .
#    command: python /usr/src/blog/manage.py runserver 0.0.0.0:8000
    volumes:
      - .:/usr/src/blog
    ports:
      - 8000:8000
    depends_on:
      - blog_db
volumes:
  postgres_data:

#  postgresdb:
#    build:
#      context: ./docker/postgres
#      dockerfile: Dockerfile
#    environment:
#      - POSTGRES_PASSWORD=qwertytrewq
#    volumes:
#      - ./docker/postgres/init.sql:/docker-entrypoint-initdb.d/init.sql
#    ports:
#      - "5432:5432"
#  blog_web:
#    build:
#      context: ./
#      dockerfile: Dockerfile
#    volumes:
#      - ./:/usr/src/blog
#    depends_on:
#      - postgresdb
#    ports:
#      - "8000:8000"
#  nginx:
#    build:
#      context: ./docker/nginx
#      dockerfile: Dockerfile
#    depends_on:
#      - web
#      - postgresdb
#    ports:
#      - "80:80"
#    volumes:
#      - ./static/:/static
